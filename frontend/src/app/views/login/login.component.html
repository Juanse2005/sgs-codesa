<app-nav></app-nav>

<div class="login-container">
  <p-card header="Iniciar Sesión" class="login-card">
    <form #form="ngForm" (ngSubmit)="login()">
      <div class="p-field p-fluid mb-4">
        <p-floatLabel>
          <input pInputText id="email" name="email" [(ngModel)]="email" required />
          <label for="email">Email</label>
        </p-floatLabel>
      </div>

      <div class="p-field p-fluid p-mt-3 mb-3">
        <p-floatLabel>
          <input pInputText type="password" id="password" name="password" [(ngModel)]="password" required />
          <label for="password">Contraseña</label>
        </p-floatLabel>
      </div>
      <p>No cuentas con una cuenta? <a style="text-decoration: underline" (click)="visible_post = true">Regístrate</a>
      </p>

      <div class="flex mb-3 align-items-center justify-content-center">
        <button pButton type="submit" label="Iniciar sesión" class="p-button-primary p-px-5"></button>
      </div>
    </form>
  </p-card>
</div>


<!-- REGISTER FORM -->
<form #formPost="ngForm" (ngSubmit)="register()" novalidate>
  <p-dialog header="Formulario de registro" [(visible)]="visible_post" [modal]="true" [style]="{ width: '30rem' }">

    <!-- Nombre -->
    <div class="mb-3">
      <label for="nombre">Nombre</label>
      <input pInputText id="nombre" name="nombre" type="text" [(ngModel)]="personas_form.nombre" class="w-full" required
        minlength="2" #nombre_post="ngModel" />
      <small class="p-error" *ngIf="nombre_post.invalid && (nombre_post.dirty || nombre_post.touched)">
        El nombre es requerido (mínimo 2 caracteres).
      </small>
    </div>

    <!-- Apellido -->
    <div class="mb-3">
      <label for="apellido">Apellido</label>
      <input pInputText id="apellido" name="apellido" type="text" [(ngModel)]="personas_form.apellido" class="w-full"
        required minlength="2" #apellido_post="ngModel" />
      <small class="p-error" *ngIf="apellido_post.invalid && (apellido_post.dirty || apellido_post.touched)">
        El apellido es requerido (mínimo 2 caracteres).
      </small>
    </div>

    <!-- Email -->
    <div class="mb-3">
      <label for="email">Email</label>
      <input pInputText id="email" name="email" type="email" [(ngModel)]="personas_form.email" class="w-full" required
        email #email_post="ngModel" />
      <small class="p-error" *ngIf="email_post.invalid && (email_post.dirty || email_post.touched)">
        Ingresa un correo válido.
      </small>
    </div>

    <!-- Password -->
    <div class="mb-3">
      <label for="password">Contraseña</label>
      <div class="p-inputgroup">
        <input [type]="showPasswordPost ? 'text' : 'password'" id="password" name="password"
          [(ngModel)]="personas_form.password" required minlength="6" #password_post="ngModel" class="w-full"
          pInputText />

        <button pButton type="button" icon="{{ showPasswordPost ? 'pi pi-eye-slash' : 'pi pi-eye' }}"
          class="p-button-text p-button-sm p-button-plain" (click)="showPasswordPost = !showPasswordPost">
        </button>
      </div>
      <small class="p-error" *ngIf="password_post.invalid && (password_post.dirty || password_post.touched)">
        La contraseña es obligatoria (mínimo 6 caracteres).
      </small>
    </div>

    <!-- Teléfono -->
    <div class="mb-3">
      <label for="telefono">Teléfono</label>
      <input pInputText id="telefono" name="telefono" type="text" [(ngModel)]="personas_form.telefono" class="w-full"
        required pattern="^[0-9]{10}$" #telefono_post="ngModel" />
      <small class="p-error" *ngIf="telefono_post.invalid && (telefono_post.dirty || telefono_post.touched)">
        Ingresa un número de 10 dígitos.
      </small>
    </div>

    <!-- Fecha de Nacimiento -->
    <div class="mb-3">
      <label for="fecha">Fecha de Nacimiento</label>
      <input pInputText id="fecha" name="fecha_nacimiento" type="date" [(ngModel)]="personas_form.fecha_nacimiento"
        class="w-full" required #fecha_nacimiento_post="ngModel" />
      <small class="p-error"
        *ngIf="fecha_nacimiento_post.invalid && (fecha_nacimiento_post.dirty || fecha_nacimiento_post.touched)">
        La fecha es obligatoria.
      </small>
    </div>

    <!-- Botones -->
    <div class="flex justify-content-end gap-2">
      <p-button label="Cancelar" severity="secondary" (onClick)="visible_post = false" />
      <p-button label="Guardar" type="submit" [disabled]="formPost.invalid" />
    </div>
  </p-dialog>
</form>